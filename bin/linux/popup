#!/bin/sh

set -e

usage='usage: popup X Y COMMAND [FD_KEEPS]'

x="$1"
y="$2"
cmd="$3"

if [ -z "$x" -o -z "$y" -o -z "$cmd" ]; then
    echo "$usage" >&2
    exit 1
fi

# urxvtdo ${4:--e} "$cmd" -geometry "${x}x${y}+9999+9999" -xrm "*transient-for: $(getroot)"
withpty ${4:--e} "urxvt -pty-fd \$0 -xrm '*transient-for: $root' -geometry ${x}x${y}+9999+9999" "$cmd"
