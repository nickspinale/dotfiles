#!/bin/sh

set -e

usage='usage: popup X Y COMMAND [FD_KEEPS]'

x="$1"
y="$2"
cmd="$3"

if [ -z "$x" -o -z "$y" -o -z "$cmd" ]; then
    echo "$usage" >&2
    exit 1
fi

# '*transient-for: 0' seems to work for now, but is undocumented
withpty ${4:--e} "urxvt -pty-fd \$0 -xrm '*transient-for: 0' -geometry ${x}x${y}+9999+9999" "$cmd"
