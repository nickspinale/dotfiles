" +-----------------------+
" | NICK SPINALE'S .vimrc |
" +-----------------------+

" TODO
"   find mapping worthy of <backspace>
"   clear autocmds before any here? (au!)?
"   deal with ftplugins messing with my options (namely fo)
"   tabular comment function
"       will improve regex to only match last comment phrase in line
"       and not match full-line comments

"   ELEGANT RUNTIMEPATH
"       as list: let &runtimepath = join(myrtp, ',')
"       order: $VIMRUNTIME, ./vim, plugins

set rtp+=~/dotfiles/src/vim-config/vim

if system('uname -a') =~ 'NixOS'
  let s:pluginLists = [ '/run/current-system/sw/share/vim-plugins/lame.rtp'
                    \ , '/run/current-system/sw/share/vim-plugins/annoying.rtp'
                    \ ]
else
  let s:pluginLists = [ '~/.vimrc.rc' ]
endif

for plugins in s:pluginLists
  for plugin in readfile(plugins)
    exec 'set rtp+=' . plugin
  endfor
endfor

let g:vimrcDir = "$HOME/dotfiles/src/vim-config/vimrc.d/"

set nocompatible

noremap <space> <nop>
noremap <del> <nop>
noremap <bs> <nop>
noremap <cr> <nop>
noremap Y <nop>

let s:imports = [ 'abbreviations'
              \ , 'appearance'
              \ , 'buffers'
              \ , 'controls'
              \ , 'editing'
              \ , 'editor'
              \ , 'proc'
              \ , 'toggles'
              \ , 'misc'
              \ ]

for import in s:imports
  exec 'source ' . g:vimrcDir . import . '.vim'
endfor
